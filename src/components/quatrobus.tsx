const data = {
    "code": 441,
    "msg": "OK",
    "data": {
    "header": {
    "rows": "11",
    "columns": "4",
    "floors": "1",
    "departureName": "Orlando Station, FL",
    "arrivalName": "Miami-Airport, FL"
    },
    "detail": [
    {
    "seatId": null,
    "floor": 1,
    "column": 1,
    "row": 1,
    "number": null,
    "status": 0,
    "type": 2,
    "typeCode": "EMPTY_SPACE"
    },
    {
    "seatId": null,
    "floor": 1,
    "column": 1,
    "row": 2,
    "number": "1C",
    "status": 1,
    "type": 7,
    "typeCode": "SOLD_SEAT"
    },
    {
    "seatId": null,
    "floor": 1,
    "column": 1,
    "row": 3,
    "number": "2C",
    "status": 1,
    "type": 7,
    
    "typeCode": "SOLD_SEAT"
    },
    {
    "seatId": 365,
    "floor": 1,
    "column": 1,
    "row": 4,
    "number": "3C",
    "status": 0,
    "type": 10,
    "typeCode": "FREE_SEAT"
    },
    {
    "seatId": 369,
    "floor": 1,
    "column": 1,
    "row": 5,
    "number": "4C",
    "status": 0,
    "type": 10,
    "typeCode": "FREE_SEAT"
    },
    {
    "seatId": 373,
    "floor": 1,
    "column": 1,
    "row": 6,
    "number": "5C",
    "status": 0,
    "type": 10,
    "typeCode": "FREE_SEAT"
    },
    {
    "seatId": 377,
    "floor": 1,
    "column": 1,
    "row": 7,
    "number": "6C",
    "status": 0,
    "type": 10,
    "typeCode": "FREE_SEAT"
    },
    {
    "seatId": 381,
    "floor": 1,
    "column": 1,
    "row": 8,
    "number": "7C",
    "status": 0,
    "type": 10,
    "typeCode": "FREE_SEAT"
    },
    {
    "seatId": 385,
    "floor": 1,
    "column": 1,
    "row": 9,
    "number": "8C",
    "status": 0,
    "type": 10,
    "typeCode": "FREE_SEAT"
    },
    {
    "seatId": 389,
    "floor": 1,
    "column": 1,
    "row": 10,
    "number": "9C",
    "status": 0,
    "type": 10,
    "typeCode": "FREE_SEAT"
    },
    
    {
    "seatId": null,
    "floor": 1,
    "column": 1,
    "row": 11,
    "number": null,
    "status": 0,
    "type": 12,
    "typeCode": "BATH"
    },
    {
    "seatId": null,
    "floor": 1,
    "column": 2,
    "row": 1,
    "number": null,
    "status": 0,
    "type": 13,
    "typeCode": "TV"
    },
    {
    "seatId": null,
    "floor": 1,
    "column": 2,
    "row": 2,
    "number": null,
    "status": 0,
    "type": 2,
    "typeCode": "EMPTY_SPACE"
    },
    {
    "seatId": null,
    "floor": 1,
    "column": 2,
    "row": 3,
    "number": null,
    "status": 0,
    "type": 2,
    "typeCode": "EMPTY_SPACE"
    },
    {
    "seatId": null,
    "floor": 1,
    "column": 2,
    "row": 4,
    "number": null,
    "status": 0,
    "type": 13,
    "typeCode": "TV"
    },
    {
    "seatId": null,
    "floor": 1,
    "column": 2,
    "row": 5,
    "number": null,
    "status": 0,
    "type": 13,
    "typeCode": "TV"
    },
    {
    "seatId": null,
    "floor": 1,
    "column": 2,
    "row": 6,
    "number": null,
    "status": 0,
    "type": 2,
    "typeCode": "EMPTY_SPACE"
    },
    {
    "seatId": null,
    
    "floor": 1,
    "column": 2,
    "row": 7,
    "number": null,
    "status": 0,
    "type": 2,
    "typeCode": "EMPTY_SPACE"
    },
    {
    "seatId": null,
    "floor": 1,
    "column": 2,
    "row": 8,
    "number": null,
    "status": 0,
    "type": 13,
    "typeCode": "TV"
    },
    {
    "seatId": null,
    "floor": 1,
    "column": 2,
    "row": 9,
    "number": null,
    "status": 0,
    "type": 13,
    "typeCode": "TV"
    },
    {
    "seatId": null,
    "floor": 1,
    "column": 2,
    "row": 10,
    "number": null,
    "status": 0,
    "type": 2,
    "typeCode": "EMPTY_SPACE"
    },
    {
    "seatId": null,
    "floor": 1,
    "column": 2,
    "row": 11,
    "number": null,
    "status": 0,
    "type": 2,
    "typeCode": "EMPTY_SPACE"
    },
    {
    "seatId": null,
    "floor": 1,
    "column": 3,
    "row": 1,
    "number": null,
    "status": 0,
    "type": 2,
    "typeCode": "EMPTY_SPACE"
    },
    {
    "seatId": 359,
    "floor": 1,
    "column": 3,
    "row": 2,
    "number": "1B",
    "status": 0,
    "type": 10,
    "typeCode": "FREE_SEAT"
    },
    {
    "seatId": 363,
    "floor": 1,
    "column": 3,
    
    "row": 3,
    "number": "2B",
    "status": 0,
    "type": 10,
    "typeCode": "FREE_SEAT"
    },
    {
    "seatId": 367,
    "floor": 1,
    "column": 3,
    "row": 4,
    "number": "3B",
    "status": 0,
    "type": 10,
    "typeCode": "FREE_SEAT"
    },
    {
    "seatId": 371,
    "floor": 1,
    "column": 3,
    "row": 5,
    "number": "4B",
    "status": 0,
    "type": 10,
    "typeCode": "FREE_SEAT"
    },
    {
    "seatId": 375,
    "floor": 1,
    "column": 3,
    "row": 6,
    "number": "5B",
    "status": 0,
    "type": 10,
    "typeCode": "FREE_SEAT"
    },
    {
    "seatId": 379,
    "floor": 1,
    "column": 3,
    "row": 7,
    "number": "6B",
    "status": 0,
    "type": 10,
    "typeCode": "FREE_SEAT"
    },
    {
    "seatId": 383,
    "floor": 1,
    "column": 3,
    "row": 8,
    "number": "7B",
    "status": 0,
    "type": 10,
    "typeCode": "FREE_SEAT"
    },
    {
    "seatId": 387,
    "floor": 1,
    "column": 3,
    "row": 9,
    "number": "8B",
    "status": 0,
    "type": 10,
    "typeCode": "FREE_SEAT"
    },
    {
    "seatId": 391,
    "floor": 1,
    "column": 3,
    "row": 10,
    "number": "9B",
    
    "status": 0,
    "type": 10,
    "typeCode": "FREE_SEAT"
    },
    {
    "seatId": null,
    "floor": 1,
    "column": 3,
    "row": 11,
    "number": null,
    "status": 0,
    "type": 2,
    "typeCode": "EMPTY_SPACE"
    },
    {
    "seatId": null,
    "floor": 1,
    "column": 4,
    "row": 1,
    "number": null,
    "status": 0,
    "type": 2,
    "typeCode": "EMPTY_SPACE"
    },
    {
    "seatId": 360,
    "floor": 1,
    "column": 4,
    "row": 2,
    "number": "1A",
    "status": 0,
    "type": 10,
    "typeCode": "FREE_SEAT"
    },
    {
    "seatId": 364,
    "floor": 1,
    "column": 4,
    "row": 3,
    "number": "2A",
    "status": 0,
    "type": 10,
    "typeCode": "FREE_SEAT"
    },
    {
    "seatId": 368,
    "floor": 1,
    "column": 4,
    "row": 4,
    "number": "3A",
    "status": 0,
    "type": 10,
    "typeCode": "FREE_SEAT"
    },
    {
    "seatId": 372,
    "floor": 1,
    "column": 4,
    "row": 5,
    "number": "4A",
    "status": 0,
    "type": 10,
    "typeCode": "FREE_SEAT"
    },
    {
    "seatId": 376,
    "floor": 1,
    "column": 4,
    "row": 6,
    "number": "5A",
    "status": 0,
    "type": 10,
    
    "typeCode": "FREE_SEAT"
    },
    {
    "seatId": 380,
    "floor": 1,
    "column": 4,
    "row": 7,
    "number": "6A",
    "status": 0,
    "type": 10,
    "typeCode": "FREE_SEAT"
    },
    {
    "seatId": 384,
    "floor": 1,
    "column": 4,
    "row": 8,
    "number": "7A",
    "status": 0,
    "type": 10,
    "typeCode": "FREE_SEAT"
    },
    {
    "seatId": 388,
    "floor": 1,
    "column": 4,
    "row": 9,
    "number": "8A",
    "status": 0,
    "type": 10,
    "typeCode": "FREE_SEAT"
    },
    {
    "seatId": 392,
    "floor": 1,
    "column": 4,
    "row": 10,
    "number": "9A",
    "status": 0,
    "type": 10,
    "typeCode": "FREE_SEAT"
    },
    {
    "seatId": null,
    "floor": 1,
    "column": 4,
    "row": 11,
    "number": null,
    "status": 0,
    "type": 2,
    "typeCode": "EMPTY_SPACE"
    }
    ],
    "seatsInfo": [
    {
    "free": "25",
    "reserveds": "0",
    "solds": "2"
    }
    ]
    }
    }

export function Quatrobus() {
    const asientos = data.data.detail;
    // Agrupar por piso
    const pisos: Record<string, any[]> = {};
    let maxCol: Record<string, number> = {};
    let maxRow: Record<string, number> = {};
    asientos.forEach(a => {
        const piso = a.floor;
        if (!pisos[piso]) pisos[piso] = [];
        pisos[piso].push(a);
        const col = Number(a.column);
        const row = Number(a.row);
        maxCol[piso] = Math.max(maxCol[piso] || 0, col);
        maxRow[piso] = Math.max(maxRow[piso] || 0, row);
    });

    const renderAsiento = (a: any) => {
        if (a.typeCode === 'EMPTY_SPACE') return <span style={{background:'#444',color:'#fff',padding:'2px 6px',borderRadius:4,display:'inline-block'}}>ES</span>;
        if (a.typeCode === 'TV') return <span style={{background:'#222',color:'#fff',padding:'2px 6px',borderRadius:4,display:'inline-block'}}>TV</span>;
        if (a.typeCode === 'BATH') return <span style={{background:'#1976d2',color:'#fff',padding:'2px 6px',borderRadius:4,display:'inline-block'}}>B</span>;
        if (a.typeCode === 'SOLD_SEAT' || a.typeCode === 'FREE_SEAT') {
            const ocupado = a.typeCode === 'SOLD_SEAT';
            return (
                <span style={{
                    background: ocupado ? '#e53935' : '#43a047',
                    color: '#fff',
                    padding: '2px 6px',
                    borderRadius: 4,
                    display: 'inline-block',
                    minWidth: 24,
                    textAlign: 'center',
                    opacity: ocupado ? 0.6 : 1,
                    border: ocupado ? '2px solid #b71c1c' : '2px solid #1b5e20',
                }}>
                    {a.number}
                </span>
            );
        }
        return null;
    };

    return (
        <div>
            <h2>Layout de bus QUATROBUS</h2>
            <div style={{ display: 'flex', gap: 32 }}>
                {Object.entries(pisos).map(([piso, asientosPiso]) => (
                    <div key={piso}>
                        <h3>Piso {piso}</h3>
                        <div style={{
                            display: 'grid',
                            gridTemplateColumns: `repeat(${maxCol[piso]}, 40px)`,
                            gridTemplateRows: `repeat(${maxRow[piso]}, 40px)`,
                            gap: 6,
                            background: '#222',
                            padding: 12,
                            borderRadius: 8,
                            boxShadow: '0 2px 8px #0002',
                        }}>
                            {Array.from({ length: maxRow[piso] }).map((_, yIdx) =>
                                Array.from({ length: maxCol[piso] }).map((_, xIdx) => {
                                    const asiento = asientosPiso.find(a => Number(a.column) === xIdx + 1 && Number(a.row) === yIdx + 1);
                                    return (
                                        <div key={xIdx + '-' + yIdx} style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', height: 32 }}>
                                            {asiento ? renderAsiento(asiento) : null}
                                        </div>
                                    );
                                })
                            )}
                        </div>
                    </div>
                ))}
            </div>
            <div style={{marginTop:16}}>
                <span style={{background:'#43a047',color:'#fff',padding:'2px 6px',borderRadius:4,marginRight:8}}>Libre</span>
                <span style={{background:'#e53935',color:'#fff',padding:'2px 6px',borderRadius:4,marginRight:8}}>Ocupado</span>
                <span style={{background:'#444',color:'#fff',padding:'2px 6px',borderRadius:4,marginRight:8}}>ES(EMPTY_SPACE): Pasillo</span>
                <span style={{background:'#1976d2',color:'#fff',padding:'2px 6px',borderRadius:4,marginRight:8}}>B(BATH): Baño</span>
                <span style={{background:'#222',color:'#fff',padding:'2px 6px',borderRadius:4,marginRight:8}}>TV</span>
            </div>
        </div>
    );
}