const data = [{"numeroAsiento":1,"numeroColumna":1,"numeroFila":1,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":1,"tarifa":52.00},{"numeroAsiento":2,"numeroColumna":2,"numeroFila":1,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":3,"numeroColumna":5,"numeroFila":1,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":1,"tarifa":52.00},{"numeroAsiento":4,"numeroColumna":4,"numeroFila":1,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":5,"numeroColumna":1,"numeroFila":2,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":6,"numeroColumna":2,"numeroFila":2,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":7,"numeroColumna":5,"numeroFila":2,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":8,"numeroColumna":4,"numeroFila":2,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":9,"numeroColumna":1,"numeroFila":3,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":10,"numeroColumna":2,"numeroFila":3,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":11,"numeroColumna":5,"numeroFila":3,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":1,"tarifa":52.00},{"numeroAsiento":12,"numeroColumna":4,"numeroFila":3,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":13,"numeroColumna":1,"numeroFila":4,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":14,"numeroColumna":2,"numeroFila":4,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":15,"numeroColumna":5,"numeroFila":4,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":16,"numeroColumna":4,"numeroFila":4,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":17,"numeroColumna":1,"numeroFila":5,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":18,"numeroColumna":2,"numeroFila":5,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":19,"numeroColumna":5,"numeroFila":5,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":20,"numeroColumna":4,"numeroFila":5,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":21,"numeroColumna":1,"numeroFila":6,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":22,"numeroColumna":2,"numeroFila":6,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":23,"numeroColumna":5,"numeroFila":6,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":24,"numeroColumna":4,"numeroFila":6,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":25,"numeroColumna":1,"numeroFila":7,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":26,"numeroColumna":2,"numeroFila":7,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":27,"numeroColumna":5,"numeroFila":7,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":28,"numeroColumna":4,"numeroFila":7,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":29,"numeroColumna":1,"numeroFila":8,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":30,"numeroColumna":2,"numeroFila":8,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":31,"numeroColumna":5,"numeroFila":8,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":32,"numeroColumna":4,"numeroFila":8,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":33,"numeroColumna":1,"numeroFila":9,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":34,"numeroColumna":2,"numeroFila":9,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":35,"numeroColumna":5,"numeroFila":9,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":36,"numeroColumna":4,"numeroFila":9,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":37,"numeroColumna":1,"numeroFila":10,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":38,"numeroColumna":2,"numeroFila":10,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":39,"numeroColumna":5,"numeroFila":10,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":40,"numeroColumna":4,"numeroFila":10,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":41,"numeroColumna":1,"numeroFila":11,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":42,"numeroColumna":2,"numeroFila":11,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":43,"numeroColumna":5,"numeroFila":11,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":44,"numeroColumna":4,"numeroFila":11,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":45,"numeroColumna":1,"numeroFila":13,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00},{"numeroAsiento":46,"numeroColumna":2,"numeroFila":13,"numeroPiso":0,"servicioNumeroAsientosPiso1":46,"servicioNumeroAsientosPiso2":null,"servicioNumeroColumnasPiso1":5,"servicioNumeroColumnasPiso2":null,"servicioNumeroFilasPiso1":13,"servicioNumeroFilasPiso2":null,"servicioNumeroPisos":1,"estadoAsiento":0,"tarifa":52.00}]

export function Perubus() {
    const asientos = data;
    // Agrupar por piso
    const pisos: Record<string, any[]> = {};
    let maxCol: Record<string, number> = {};
    let maxRow: Record<string, number> = {};
    asientos.forEach(a => {
        const piso = a.numeroPiso;
        if (!pisos[piso]) pisos[piso] = [];
        pisos[piso].push(a);
        const col = Number(a.numeroColumna);
        const row = Number(a.numeroFila);
        maxCol[piso] = Math.max(maxCol[piso] || 0, col);
        maxRow[piso] = Math.max(maxRow[piso] || 0, row);
    });

    const renderAsiento = (a: any) => {
        const ocupado = a.estadoAsiento === 1;
        return (
            <span style={{
                background: ocupado ? '#e53935' : '#43a047',
                color: '#fff',
                padding: '2px 6px',
                borderRadius: 4,
                display: 'inline-block',
                minWidth: 24,
                textAlign: 'center',
                opacity: ocupado ? 0.6 : 1,
                border: ocupado ? '2px solid #b71c1c' : '2px solid #1b5e20',
            }}>
                {a.numeroAsiento}
            </span>
        );
    };

    return (
        <div>
            <h2>Layout de bus PERUBUS</h2>
            <div style={{ display: 'flex', gap: 32 }}>
                {Object.entries(pisos).map(([piso, asientosPiso]) => (
                    <div key={piso}>
                        <h3>Piso {piso}</h3>
                        <div style={{
                            display: 'grid',
                            gridTemplateColumns: `repeat(${maxCol[piso]}, 40px)`,
                            gridTemplateRows: `repeat(${maxRow[piso]}, 40px)`,
                            gap: 6,
                            background: '#222',
                            padding: 12,
                            borderRadius: 8,
                            boxShadow: '0 2px 8px #0002',
                        }}>
                            {Array.from({ length: maxRow[piso] }).map((_, yIdx) =>
                                Array.from({ length: maxCol[piso] }).map((_, xIdx) => {
                                    const asiento = asientosPiso.find(a => Number(a.numeroColumna) === xIdx + 1 && Number(a.numeroFila) === yIdx + 1);
                                    return (
                                        <div key={xIdx + '-' + yIdx} style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', height: 32 }}>
                                            {asiento ? renderAsiento(asiento) : null}
                                        </div>
                                    );
                                })
                            )}
                        </div>
                    </div>
                ))}
            </div>
            <div style={{marginTop:16}}>
                <span style={{background:'#43a047',color:'#fff',padding:'2px 6px',borderRadius:4,marginRight:8}}>Libre</span>
                <span style={{background:'#e53935',color:'#fff',padding:'2px 6px',borderRadius:4,marginRight:8}}>Ocupado</span>
            </div>
        </div>
    );
}