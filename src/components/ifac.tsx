const data = [
    {
        "type": "seat",
        "no": "39",
        "column": 4,
        "row": 10,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "11",
        "column": 2,
        "row": 1,
        "floor": 1,
        "status": 1,
        "fare": 60
    },
    {
        "type": "seat",
        "no": "2",
        "column": 2,
        "row": 4,
        "floor": 1,
        "status": 1,
        "fare": 60
    },
    {
        "type": "seat",
        "no": "3",
        "column": 5,
        "row": 4,
        "floor": 1,
        "status": 0,
        "fare": 60
    },
    {
        "type": "seat",
        "no": "41",
        "column": 1,
        "row": 9,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "38",
        "column": 2,
        "row": 10,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "35",
        "column": 4,
        "row": 11,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "40",
        "column": 5,
        "row": 10,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "37",
        "column": 1,
        "row": 10,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "34",
        "column": 2,
        "row": 11,
        "floor": 2,
        "status": 1,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "31",
        "column": 4,
        "row": 12,
        "floor": 2,
        "status": 1,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "33",
        "column": 1,
        "row": 11,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "27",
        "column": 4,
        "row": 13,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "32",
        "column": 5,
        "row": 12,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "29",
        "column": 1,
        "row": 12,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "26",
        "column": 2,
        "row": 13,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "28",
        "column": 5,
        "row": 13,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "24",
        "column": 2,
        "row": 14,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "25",
        "column": 1,
        "row": 13,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "22",
        "column": 2,
        "row": 15,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "23",
        "column": 1,
        "row": 14,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "14",
        "column": 2,
        "row": 17,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "18",
        "column": 2,
        "row": 16,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "43",
        "column": 4,
        "row": 9,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "16",
        "column": 5,
        "row": 17,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "17",
        "column": 1,
        "row": 16,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "20",
        "column": 5,
        "row": 16,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "19",
        "column": 4,
        "row": 16,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "4",
        "column": 1,
        "row": 3,
        "floor": 1,
        "status": 0,
        "fare": 60
    },
    {
        "type": "seat",
        "no": "10",
        "column": 1,
        "row": 1,
        "floor": 1,
        "status": 1,
        "fare": 60
    },
    {
        "type": "seat",
        "no": "12",
        "column": 5,
        "row": 1,
        "floor": 1,
        "status": 1,
        "fare": 60
    },
    {
        "type": "seat",
        "no": "42",
        "column": 2,
        "row": 9,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "15",
        "column": 4,
        "row": 17,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "9",
        "column": 5,
        "row": 2,
        "floor": 1,
        "status": 1,
        "fare": 60
    },
    {
        "type": "seat",
        "no": "8",
        "column": 2,
        "row": 2,
        "floor": 1,
        "status": 0,
        "fare": 60
    },
    {
        "type": "seat",
        "no": "7",
        "column": 1,
        "row": 2,
        "floor": 1,
        "status": 1,
        "fare": 60
    },
    {
        "type": "seat",
        "no": "6",
        "column": 5,
        "row": 3,
        "floor": 1,
        "status": 0,
        "fare": 60
    },
    {
        "type": "seat",
        "no": "1",
        "column": 1,
        "row": 4,
        "floor": 1,
        "status": 1,
        "fare": 60
    },
    {
        "type": "seat",
        "no": "56",
        "column": 5,
        "row": 6,
        "floor": 2,
        "status": 1,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "52",
        "column": 5,
        "row": 7,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "53",
        "column": 1,
        "row": 6,
        "floor": 2,
        "status": 1,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "49",
        "column": 1,
        "row": 7,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "60",
        "column": 5,
        "row": 5,
        "floor": 2,
        "status": 1,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "46",
        "column": 2,
        "row": 8,
        "floor": 2,
        "status": 1,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "54",
        "column": 2,
        "row": 6,
        "floor": 2,
        "status": 1,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "55",
        "column": 4,
        "row": 6,
        "floor": 2,
        "status": 1,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "48",
        "column": 5,
        "row": 8,
        "floor": 2,
        "status": 1,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "59",
        "column": 4,
        "row": 5,
        "floor": 2,
        "status": 1,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "57",
        "column": 1,
        "row": 5,
        "floor": 2,
        "status": 1,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "47",
        "column": 4,
        "row": 8,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "44",
        "column": 5,
        "row": 9,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "45",
        "column": 1,
        "row": 8,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "58",
        "column": 2,
        "row": 5,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "36",
        "column": 5,
        "row": 11,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "51",
        "column": 4,
        "row": 7,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "13",
        "column": 1,
        "row": 17,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "50",
        "column": 2,
        "row": 7,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "30",
        "column": 2,
        "row": 12,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "21",
        "column": 1,
        "row": 15,
        "floor": 2,
        "status": 0,
        "fare": 40
    },
    {
        "type": "seat",
        "no": "5",
        "column": 2,
        "row": 3,
        "floor": 1,
        "status": 0,
        "fare": 60
    }
]

export function Ifac() {
    const asientos = data;
    // Agrupar por piso
    const pisos: Record<string, any[]> = {};
    let maxCol: Record<string, number> = {};
    let maxRow: Record<string, number> = {};
    asientos.forEach(a => {
        const piso = a.floor;
        if (!pisos[piso]) pisos[piso] = [];
        pisos[piso].push(a);
        const col = Number(a.column);
        const row = Number(a.row);
        maxCol[piso] = Math.max(maxCol[piso] || 0, col);
        maxRow[piso] = Math.max(maxRow[piso] || 0, row);
    });

    const renderAsiento = (a: any) => {
        if (a.type === 'seat') {
            const ocupado = a.status === 1;
            return (
                <span style={{
                    background: ocupado ? '#e53935' : '#43a047',
                    color: '#fff',
                    padding: '2px 6px',
                    borderRadius: 4,
                    display: 'inline-block',
                    minWidth: 24,
                    textAlign: 'center',
                    opacity: ocupado ? 0.6 : 1,
                    border: ocupado ? '2px solid #b71c1c' : '2px solid #1b5e20',
                }}>
                    {a.no}
                </span>
            );
        }
        return null;
    };

    return (
        <div>
            <h2>Layout de bus IFAC</h2>
            <div style={{ display: 'flex', gap: 32 }}>
                {Object.entries(pisos).map(([piso, asientosPiso]) => (
                    <div key={piso}>
                        <h3>Piso {piso}</h3>
                        <div style={{
                            display: 'grid',
                            gridTemplateColumns: `repeat(${maxCol[piso]}, 40px)`,
                            gridTemplateRows: `repeat(${maxRow[piso]}, 40px)`,
                            gap: 6,
                            background: '#222',
                            padding: 12,
                            borderRadius: 8,
                            boxShadow: '0 2px 8px #0002',
                        }}>
                            {Array.from({ length: maxRow[piso] }).map((_, yIdx) =>
                                Array.from({ length: maxCol[piso] }).map((_, xIdx) => {
                                    const asiento = asientosPiso.find(a => Number(a.column) === xIdx + 1 && Number(a.row) === yIdx + 1);
                                    return (
                                        <div key={xIdx + '-' + yIdx} style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', height: 32 }}>
                                            {asiento ? renderAsiento(asiento) : null}
                                        </div>
                                    );
                                })
                            )}
                        </div>
                    </div>
                ))}
            </div>
            <div style={{marginTop:16}}>
                <span style={{background:'#43a047',color:'#fff',padding:'2px 6px',borderRadius:4,marginRight:8}}>Libre</span>
                <span style={{background:'#e53935',color:'#fff',padding:'2px 6px',borderRadius:4,marginRight:8}}>Ocupado</span>
            </div>
        </div>
    );
}