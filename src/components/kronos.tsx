const data = {
    "status": "success",
    "code": 200,
    "message": "",
    "mapa": [
        {
            "tipobus": "Cama suite",
            "numpisos": "2",
            "idruta": "688",
            "idorigen": "46",
            "origen": "Santiago",
            "terminalorigen": null,
            "direccionorigen": null,
            "iddestino": "28",
            "destino": "Antofagasta",
            "terminaldestino": null,
            "direcciondestino": null,
            "fechasalida": "2025-04-21",
            "horasalida": "08:00:00",
            "salida": "2025-04-21 08:00:00",
            "duracion": 18.833333333333332,
            "fechallegada": "2025-04-22",
            "horallegada": "03:00-00",
            "llegada": "2025-04-22 03:00:00",
            "precio": "250",
            "iddivisa": "7",
            "orientacion": "270",
            "alto": "27",
            "ancho": "42",
            "deshabilitado": "0",
            "pisos": [
                {
                    "piso": 1,
                    "numfilas": 4,
                    "numcolumnas": 8,
                    "datos": [
                        [
                            {
                                "fila": 1,
                                "columna": 1,
                                "asiento": "17",
                                "ocupado": false
                            },
                            {
                                "fila": 1,
                                "columna": 2,
                                "asiento": "13",
                                "ocupado": false
                            },
                            {
                                "fila": 1,
                                "columna": 3,
                                "asiento": "11",
                                "ocupado": false
                            },
                            {
                                "fila": 1,
                                "columna": 4,
                                "asiento": "7",
                                "ocupado": false
                            },
                            {
                                "fila": 1,
                                "columna": 5,
                                "asiento": "5",
                                "ocupado": false
                            },
                            {
                                "fila": 1,
                                "columna": 6,
                                "asiento": "1",
                                "ocupado": false
                            },
                            {
                                "fila": 1,
                                "columna": 7,
                                "asiento": "wc",
                                "ocupado": true
                            },
                            {
                                "fila": 1,
                                "columna": 8,
                                "asiento": "ch",
                                "ocupado": true
                            }
                        ],
                        [
                            {
                                "fila": 2,
                                "columna": 1,
                                "asiento": "16",
                                "ocupado": false
                            },
                            {
                                "fila": 2,
                                "columna": 2,
                                "asiento": "14",
                                "ocupado": false
                            },
                            {
                                "fila": 2,
                                "columna": 3,
                                "asiento": "10",
                                "ocupado": false
                            },
                            {
                                "fila": 2,
                                "columna": 4,
                                "asiento": "8",
                                "ocupado": false
                            },
                            {
                                "fila": 2,
                                "columna": 5,
                                "asiento": "4",
                                "ocupado": false
                            },
                            {
                                "fila": 2,
                                "columna": 6,
                                "asiento": "2",
                                "ocupado": false
                            },
                            {
                                "fila": 2,
                                "columna": 7,
                                "asiento": "p",
                                "ocupado": true
                            },
                            {
                                "fila": 2,
                                "columna": 8,
                                "asiento": "p",
                                "ocupado": true
                            }
                        ],
                        [
                            {
                                "fila": 3,
                                "columna": 1,
                                "asiento": "p",
                                "ocupado": true
                            },
                            {
                                "fila": 3,
                                "columna": 2,
                                "asiento": "p",
                                "ocupado": true
                            },
                            {
                                "fila": 3,
                                "columna": 3,
                                "asiento": "p",
                                "ocupado": true
                            },
                            {
                                "fila": 3,
                                "columna": 4,
                                "asiento": "tv2",
                                "ocupado": true
                            },
                            {
                                "fila": 3,
                                "columna": 5,
                                "asiento": "p",
                                "ocupado": true
                            },
                            {
                                "fila": 3,
                                "columna": 6,
                                "asiento": "p",
                                "ocupado": true
                            },
                            {
                                "fila": 3,
                                "columna": 7,
                                "asiento": "tv1",
                                "ocupado": true
                            },
                            {
                                "fila": 3,
                                "columna": 8,
                                "asiento": "p",
                                "ocupado": true
                            }
                        ],
                        [
                            {
                                "fila": 4,
                                "columna": 1,
                                "asiento": "18",
                                "ocupado": false
                            },
                            {
                                "fila": 4,
                                "columna": 2,
                                "asiento": "15",
                                "ocupado": false
                            },
                            {
                                "fila": 4,
                                "columna": 3,
                                "asiento": "12",
                                "ocupado": false
                            },
                            {
                                "fila": 4,
                                "columna": 4,
                                "asiento": "9",
                                "ocupado": false
                            },
                            {
                                "fila": 4,
                                "columna": 5,
                                "asiento": "6",
                                "ocupado": false
                            },
                            {
                                "fila": 4,
                                "columna": 6,
                                "asiento": "3",
                                "ocupado": false
                            },
                            {
                                "fila": 4,
                                "columna": 7,
                                "asiento": "gh_pd",
                                "ocupado": true
                            },
                            {
                                "fila": 4,
                                "columna": 8,
                                "asiento": "p",
                                "ocupado": true
                            }
                        ]
                    ]
                },
                {
                    "piso": 2,
                    "numfilas": 4,
                    "numcolumnas": 8,
                    "datos": [
                        [
                            {
                                "fila": 1,
                                "columna": 1,
                                "asiento": "41",
                                "ocupado": false
                            },
                            {
                                "fila": 1,
                                "columna": 2,
                                "asiento": "37",
                                "ocupado": false
                            },
                            {
                                "fila": 1,
                                "columna": 3,
                                "asiento": "35",
                                "ocupado": false
                            },
                            {
                                "fila": 1,
                                "columna": 4,
                                "asiento": "31",
                                "ocupado": false
                            },
                            {
                                "fila": 1,
                                "columna": 5,
                                "asiento": "29",
                                "ocupado": false
                            },
                            {
                                "fila": 1,
                                "columna": 6,
                                "asiento": "25",
                                "ocupado": false
                            },
                            {
                                "fila": 1,
                                "columna": 7,
                                "asiento": "23",
                                "ocupado": false
                            },
                            {
                                "fila": 1,
                                "columna": 8,
                                "asiento": "19",
                                "ocupado": false
                            }
                        ],
                        [
                            {
                                "fila": 2,
                                "columna": 1,
                                "asiento": "40",
                                "ocupado": false
                            },
                            {
                                "fila": 2,
                                "columna": 2,
                                "asiento": "38",
                                "ocupado": false
                            },
                            {
                                "fila": 2,
                                "columna": 3,
                                "asiento": "34",
                                "ocupado": false
                            },
                            {
                                "fila": 2,
                                "columna": 4,
                                "asiento": "32",
                                "ocupado": false
                            },
                            {
                                "fila": 2,
                                "columna": 5,
                                "asiento": "28",
                                "ocupado": false
                            },
                            {
                                "fila": 2,
                                "columna": 6,
                                "asiento": "26",
                                "ocupado": false
                            },
                            {
                                "fila": 2,
                                "columna": 7,
                                "asiento": "22",
                                "ocupado": false
                            },
                            {
                                "fila": 2,
                                "columna": 8,
                                "asiento": "20",
                                "ocupado": false
                            }
                        ],
                        [
                            {
                                "fila": 3,
                                "columna": 1,
                                "asiento": "p",
                                "ocupado": true
                            },
                            {
                                "fila": 3,
                                "columna": 2,
                                "asiento": "p",
                                "ocupado": true
                            },
                            {
                                "fila": 3,
                                "columna": 3,
                                "asiento": "p",
                                "ocupado": true
                            },
                            {
                                "fila": 3,
                                "columna": 4,
                                "asiento": "tv1",
                                "ocupado": true
                            },
                            {
                                "fila": 3,
                                "columna": 5,
                                "asiento": "p",
                                "ocupado": true
                            },
                            {
                                "fila": 3,
                                "columna": 6,
                                "asiento": "p",
                                "ocupado": true
                            },
                            {
                                "fila": 3,
                                "columna": 7,
                                "asiento": "p",
                                "ocupado": true
                            },
                            {
                                "fila": 3,
                                "columna": 8,
                                "asiento": "tv1",
                                "ocupado": true
                            }
                        ],
                        [
                            {
                                "fila": 4,
                                "columna": 1,
                                "asiento": "72",
                                "ocupado": false
                            },
                            {
                                "fila": 4,
                                "columna": 2,
                                "asiento": "39",
                                "ocupado": false
                            },
                            {
                                "fila": 4,
                                "columna": 3,
                                "asiento": "36",
                                "ocupado": false
                            },
                            {
                                "fila": 4,
                                "columna": 4,
                                "asiento": "33",
                                "ocupado": false
                            },
                            {
                                "fila": 4,
                                "columna": 5,
                                "asiento": "30",
                                "ocupado": false
                            },
                            {
                                "fila": 4,
                                "columna": 6,
                                "asiento": "27",
                                "ocupado": false
                            },
                            {
                                "fila": 4,
                                "columna": 7,
                                "asiento": "gh",
                                "ocupado": true
                            },
                            {
                                "fila": 4,
                                "columna": 8,
                                "asiento": "21",
                                "ocupado": false
                            }
                        ]
                    ]
                }
            ]
        }
    ]
}

export function Kronos() {
    const mapa = data.mapa[0];
    const pisos = mapa.pisos;

    const renderAsiento = (asiento: any) => {
        if (asiento.asiento === 'p') return <span style={{background:'#444',color:'#fff',padding:'2px 6px',borderRadius:4,display:'inline-block'}}>p</span>;
        if (asiento.asiento === 'wc') return <span style={{background:'#1976d2',color:'#fff',padding:'2px 6px',borderRadius:4,display:'inline-block'}}>wc</span>;
        if (asiento.asiento === 'ch') return <span style={{background:'#8d5524',color:'#fff',padding:'2px 6px',borderRadius:4,display:'inline-block'}}>ch</span>;
        if (asiento.asiento.startsWith('tv')) return <span style={{background:'#222',color:'#fff',padding:'2px 6px',borderRadius:4,display:'inline-block'}}>tv</span>;
        if (asiento.asiento.startsWith('gh')) return <span style={{background:'#388e3c',color:'#fff',padding:'2px 6px',borderRadius:4,display:'inline-block'}}>gh</span>;
        return (
            <span style={{
                background: asiento.ocupado ? '#e53935' : '#43a047',
                color: '#fff',
                padding: '2px 6px',
                borderRadius: 4,
                display: 'inline-block',
                minWidth: 24,
                textAlign: 'center',
                opacity: asiento.ocupado ? 0.6 : 1,
                border: asiento.ocupado ? '2px solid #b71c1c' : '2px solid #1b5e20',
            }}>
                {asiento.asiento}
            </span>
        );
    };

    return (
        <div>
            <h2>Layout de bus KRONOS</h2>
            <div style={{ display: 'flex', gap: 32 }}>
                {pisos.map((piso: any) => (
                    <div key={piso.piso}>
                        <h3>Piso {piso.piso}</h3>
                        <div style={{
                            display: 'grid',
                            gridTemplateColumns: `repeat(${piso.numcolumnas}, 40px)`,
                            gap: 6,
                            background: '#222',
                            padding: 12,
                            borderRadius: 8,
                            boxShadow: '0 2px 8px #0002',
                        }}>
                            {piso.datos.flat().map((asiento: any, idx: number) => (
                                <div key={idx} style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', height: 32 }}>
                                    {renderAsiento(asiento)}
                                </div>
                            ))}
                        </div>
                    </div>
                ))}
            </div>
            <div style={{marginTop:16}}>
                <span style={{background:'#43a047',color:'#fff',padding:'2px 6px',borderRadius:4,marginRight:8}}>Libre</span>
                <span style={{background:'#e53935',color:'#fff',padding:'2px 6px',borderRadius:4,marginRight:8}}>Ocupado</span>
                <span style={{background:'#444',color:'#fff',padding:'2px 6px',borderRadius:4,marginRight:8}}>p: Pasillo</span>
                <span style={{background:'#1976d2',color:'#fff',padding:'2px 6px',borderRadius:4,marginRight:8}}>wc: Baño</span>
                <span style={{background:'#8d5524',color:'#fff',padding:'2px 6px',borderRadius:4,marginRight:8}}>ch: Chofer</span>
                <span style={{background:'#222',color:'#fff',padding:'2px 6px',borderRadius:4,marginRight:8}}>tv: TV</span>
                <span style={{background:'#388e3c',color:'#fff',padding:'2px 6px',borderRadius:4,marginRight:8}}>gh: Guía</span>
            </div>
        </div>
    );
}